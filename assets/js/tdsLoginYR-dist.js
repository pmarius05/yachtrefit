function registerAction(s,e,t,d,r,i,o){var n={action:"td_mod_subscription_register_yr",email:s,user:e,pass:t,retype_pass:d,role:r,region:i,captcha:o},a=jQuery("#tds-register-div"),_=a.closest(".tds-block-inner").find("#tds_register_button_yr");a.find(".td_display_err").hide(),_.prop("disabled",!0).addClass("tds-s-btn-saving"),jQuery.ajax({type:"POST",url:td_ajax_url,data:n,success:function(s,e,t){var d=jQuery.parseJSON(s),r=jQuery("#tds-register-div");if((n=r.closest(".tds-block-inner").find("#tds_register_button_yr")).removeClass("tds-s-btn-saving"),1===d[1]){tdLogin.addRemoveClass([".td_display_err",1,"td_display_msg_ok"]),tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-success"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-error"]);var i=new URLSearchParams(new URL(window.location.href).search.slice(1));if(i.has("ref_url")){var o=r.find("#tds-continue-subscription"),n=r.closest(".tds-block-inner").find("#tds_register_button_yr"),a=r.closest(".tds-block-inner").find(".tds-s-cal-page-switch");o.length&&o.show().attr("href",window.atob(i.get("ref_url").replace("=",""))),n.length&&n.hide(),a.length&&a.hide()}else{n=r.closest(".tds-block-inner").find("#tds_register_button_yr"),a=r.closest(".tds-block-inner").find(".tds-s-cal-page-switch");var _=r.closest(".tds-block-inner").find("#tds-my-account");n.length&&n.hide(),a.length&&a.hide(),_.length&&_.show()}r.find(".tds-s-form-content .tds-s-fc-inner").hide()}else tdLogin.addRemoveClass([".td_display_err",0,"td_display_msg_ok"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]);tdLogin.showHideMsg(d[2])},error:function(s,e,t){}})}jQuery(document).ready((function(){jQuery("body").on("click","#tds_register_button_yr",(function(s){s.preventDefault();var e=jQuery("#tds_register_email_yr"),t=jQuery("#tds_register_user_yr"),d=jQuery("#tds_register_pass_yr"),r=jQuery("#tds_register_retype_pass_yr"),i=jQuery("#tds_register_role_yr"),o=jQuery("#tds_register_region_yr"),n=jQuery("#gRecaptchaResponseR");if(e.length&&t.length&&d.length&&r.length&&i.length){var a=e.val().trim(),_=t.val().trim(),l=d.val().trim(),c=r.val().trim(),g=i.find("option:selected").val(),u=o.find("option:selected").val(),y=n.attr("data-sitekey"),p="";if(!tdLogin.email_pattern.test(a))return tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),void tdLogin.showHideMsg(window.td_email_incorrect);if(""===_)return tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),void tdLogin.showHideMsg(window.td_user_incorrect);if(""===l)return tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),void tdLogin.showHideMsg(window.td_pass_empty);if(!tdLogin.pass_pattern.test(l))return tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),void tdLogin.showHideMsg(window.td_pass_pattern_incorrect);if(l!==c)return tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),void tdLogin.showHideMsg(window.td_retype_pass_incorrect);if(""===g)return tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),void tdLogin.showHideMsg("Please select a role.");if(""===u)return tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),void tdLogin.showHideMsg("Please select a region.");console.log("Region "+u),n.length?grecaptcha.ready((function(){grecaptcha.execute(y,{action:"submit"}).then((function(s){p=s,tdLogin.doCustomAction("td_mod_subscription_register",a,_,l,c,p)}))})):registerAction(a,_,l,c,g,u)}}))}));